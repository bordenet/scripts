{
  "phase0": [
    {
      "id": "0.1",
      "title": "README Analysis & Claims Extraction",
      "objective": "Extract and catalog all claims about project architecture, features, and setup from the README",
      "tasks": [
        "Identify the stated project purpose and scope",
        "List all claimed technologies and frameworks",
        "Extract documented architecture pattern (if any)",
        "Note all setup/installation claims",
        "Catalog documented features and capabilities",
        "Identify any architectural diagrams or descriptions",
        "Note what version of languages/frameworks are claimed"
      ],
      "deliverable": "Structured list of testable claims with source locations for validation against code",
      "context": {
        "readme_content": "# Codebase Reviewer\n\nAI-powered codebase analysis and onboarding tool that generates structured prompts for systematic code review.\n\n## Overview\n\nCodebase Reviewer analyzes repositories to help teams:\n- **Onboard new engineers faster** with structured learning paths\n- **Review large codebases systematically** using AI-optimized prompts\n- **Identify technical debt and documentation drift** automatically\n- **Generate actionable remediation plans** prioritized by impact\n\n## Key Features\n\n### Documentation-First Analysis\n- Analyzes project documentation (README, architecture docs, setup guides) **before** code\n- Extracts testable claims about architecture, setup, and features\n- Validates documentation against actual code implementation\n- Identifies drift, gaps, and outdated information\n\n### Multi-Phase Prompt Generation\nGenerates AI prompts in 5 progressive phases:\n\n1. **Phase 0: Documentation Review** - Extract claims from docs\n2. **Phase 1: Architecture Analysis** - Validate architecture against code\n3. **Phase 2: Implementation Deep-Dive** - Code quality, patterns, observability\n4. **Phase 3: Development Workflow** - Setup validation, testing strategy\n5. **Phase 4: Interactive Remediation** - Prioritized action planning\n\n### Comprehensive Analysis\n- Programming language and framework detection\n- Dependency analysis and health checks\n- Code quality assessment (TODOs, security issues, technical debt)\n- Architecture pattern detection and validation\n- Setup instruction validation\n\n## Installation\n\n```bash\n# Clone the repository\ncd codebase-reviewer\n\n# Create virtual environment\npython3 -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Install in development mode\npip install -e .\n```\n\n## Usage\n\n### Command-Line Interface\n\n#### Basic Analysis\n```bash\n# Analyze a repository\npython -m codebase_reviewer analyze /path/to/repo\n\n# Analyze with output files\npython -m codebase_reviewer analyze /path/to/repo \\\n    --output analysis.json \\\n    --prompts-output prompts.md\n\n# Quiet mode (minimal output)\npython -m codebase_reviewer analyze /path/to/repo --quiet\n```\n\n#### View Prompts\n```bash\n# Display all generated prompts\npython -m codebase_reviewer prompts /path/to/repo\n\n# Display specific phase only\npython -m codebase_reviewer prompts /path/to/repo --phase 0\n```\n\n### Example Output\n\n```\nCodebase Reviewer - Analyzing: /home/user/my-project\n\n  Phase 0: Analyzing documentation...\n  Found 8 documentation files\n  Extracted 12 testable claims\n  Phase 1-2: Analyzing code structure...\n  Detected 2 languages\n  Detected 3 frameworks\n  Found 45 quality issues\n  Validation: Comparing documentation vs code...\n  Found 3 documentation drift issues\n  Drift severity: medium\n  Generating AI prompts...\n  Generated 11 AI prompts across 5 phases\n  Analysis complete in 2.34 seconds\n\n============================================================\nANALYSIS SUMMARY\n============================================================\n\nDocumentation:\n  Files found: 8\n  Completeness: 75.0%\n  Claims extracted: 12\n  Architecture: microservices\n\nCode Structure:\n  Python: 85.3%\n  Shell: 14.7%\n  Frameworks: Flask, Docker\n  Quality issues: 45\n\nValidation:\n  Drift severity: MEDIUM\n  Drift issues: 3\n  Undocumented features: 2\n\nGenerated Prompts:\n  Total prompts: 11\n  Phase 0 (Documentation Review): 3\n  Phase 1 (Architecture Analysis): 2\n  Phase 2 (Implementation Deep-Dive): 2\n  Phase 3 (Development Workflow): 2\n  Phase 4 (Interactive Remediation): 2\n\nCompleted in 2.34 seconds\n```\n\n## Architecture\n\n### Core Components\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       Analysis Orchestrator              \u2502\n\u2502  (Coordinates analysis pipeline)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502            \u2502            \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Docs    \u2502 \u2502  Code  \u2502 \u2502Validation \u2502\n\u2502 Analyzer  \u2502 \u2502Analyzer\u2502 \u2502  Engine   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n      \u2502            \u2502            \u2502\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u2502     Prompt     \u2502\n           \u2502   Generator    \u2502\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n### Analysis Flow\n\n1. **Documentation Analyzer**: Discovers and analyzes all markdown/documentation files\n2. **Code Analyzer**: Analyzes repository structure, languages, frameworks, dependencies\n3. **Validation Engine**: Cross-checks documentation claims against code reality\n4. **Prompt Generator**: Creates structured AI prompts incorporating findings\n\n## Generated Prompts\n\nPrompts are designed to guide AI assistants (Claude, GPT-4, Gemini) through systematic code review:\n\n### Phase 0: Documentation Review\n- README analysis and claims extraction\n- Architecture documentation review\n- Setup and build documentation assessment\n\n### Phase 1: Architecture Analysis\n- Architecture validation against code\n- Dependency analysis and health checks\n\n### Phas",
        "readme_path": "README.md",
        "total_docs_found": 1
      },
      "dependencies": []
    },
    {
      "id": "0.3",
      "title": "Setup & Build Documentation Review",
      "objective": "Understand the documented development workflow and prerequisites",
      "tasks": [
        "List all documented prerequisite requirements (tools, versions, etc.)",
        "Document the claimed build process step-by-step",
        "Identify all mentioned environment variables and their purposes",
        "Note deployment procedures if described",
        "Identify testing instructions",
        "Flag any missing or unclear setup steps"
      ],
      "deliverable": "Development workflow checklist for validation against actual config files",
      "context": {
        "prerequisites": [],
        "build_steps": [],
        "environment_vars": [],
        "documented_in": [
          "README.md"
        ]
      },
      "dependencies": [
        "0.1"
      ]
    }
  ],
  "phase1": [
    {
      "id": "1.1",
      "title": "Validate Documented Architecture Against Actual Code",
      "objective": "Verify if actual code structure matches documented architecture claims",
      "tasks": [
        "Compare claimed architectural pattern vs actual implementation",
        "Verify documented modules/layers exist in code",
        "Check if technology stack matches documentation",
        "Identify undocumented components or services",
        "Flag any significant documentation inaccuracies",
        "Assess overall architecture quality and appropriateness"
      ],
      "deliverable": "Architecture validation report with discrepancies highlighted and recommendations",
      "context": {
        "claimed_architecture": {
          "pattern": "microservices",
          "layers": [
            "layer",
            "service",
            "repository"
          ],
          "components": [
            "Core",
            "DocumentationAnalyzer",
            "CodeAnalyzer",
            "ValidationEngine",
            "PromptGenerator"
          ]
        },
        "actual_structure": {
          "languages": [
            {
              "name": "Python",
              "percentage": 100.0
            }
          ],
          "frameworks": [
            "Flask",
            "Django"
          ],
          "entry_points": []
        },
        "validation_results": [
          {
            "status": "valid",
            "evidence": "Detected frameworks: ['Flask', 'Django']",
            "recommendation": "Architecture pattern appears consistent"
          },
          {
            "status": "partial",
            "evidence": "Found 0/5 claimed components",
            "recommendation": "Review documented component list for accuracy"
          }
        ]
      },
      "dependencies": [
        "0.1",
        "0.2"
      ]
    },
    {
      "id": "1.2",
      "title": "Dependency Analysis and Health Check",
      "objective": "Analyze project dependencies for health, security, and documentation accuracy",
      "tasks": [
        "Review all external dependencies and their purposes",
        "Identify any outdated or deprecated dependencies",
        "Check for potential security concerns",
        "Verify dependencies match documented prerequisites",
        "Identify missing dependency documentation",
        "Assess dependency management practices"
      ],
      "deliverable": "Dependency health report with recommendations for updates or documentation",
      "context": {
        "dependencies": [
          {
            "name": "Flask",
            "version": "3.0.0",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "Jinja2",
            "version": "3.1.2",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "GitPython",
            "version": "3.1.40",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "PyYAML",
            "version": "6.0.1",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "click",
            "version": "8.1.7",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "pygments",
            "version": "2.17.2",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "chardet",
            "version": "5.2.0",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "pathspec",
            "version": "0.11.2",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "toml",
            "version": "0.10.2",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "python-dotenv",
            "version": "1.0.0",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "dataclasses-json",
            "version": "0.6.3",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "requests",
            "version": "2.31.0",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "pylint",
            "version": "3.0.3",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "pytest",
            "version": "7.4.3",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "pytest-cov",
            "version": "4.1.0",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "black",
            "version": "23.12.1",
            "type": "production",
            "source": "requirements.txt"
          },
          {
            "name": "mypy",
            "version": "1.7.1",
            "type": "production",
            "source": "requirements.txt"
          }
        ],
        "total_count": 17,
        "documented_prerequisites": []
      },
      "dependencies": [
        "0.3"
      ]
    }
  ],
  "phase2": [
    {
      "id": "2.1",
      "title": "Code Quality and Technical Debt Assessment",
      "objective": "Assess code quality, identify technical debt, and security concerns",
      "tasks": [
        "Review TODO/FIXME comments for patterns and urgency",
        "Assess potential security issues (hardcoded secrets, etc.)",
        "Identify areas with high technical debt",
        "Evaluate error handling patterns",
        "Assess code organization and modularity",
        "Identify anti-patterns or code smells"
      ],
      "deliverable": "Code quality report with prioritized remediation recommendations",
      "context": {
        "todo_count": 0,
        "sample_todos": [],
        "security_issues_count": 0,
        "sample_security_issues": []
      },
      "dependencies": [
        "1.1"
      ]
    },
    {
      "id": "2.2",
      "title": "Observability and Operational Maturity",
      "objective": "Assess logging, monitoring, and operational maturity of the codebase",
      "tasks": [
        "Evaluate logging practices (coverage, consistency, level usage)",
        "Identify monitoring and metrics instrumentation",
        "Check for error tracking integration (Sentry, etc.)",
        "Assess configuration management approach",
        "Identify deployment and infrastructure code",
        "Evaluate operational readiness (health checks, etc.)"
      ],
      "deliverable": "Observability assessment with gaps and recommendations",
      "context": {
        "repository_path": "/home/user/scripts/codebase-reviewer",
        "frameworks": [
          "Flask",
          "Django"
        ]
      },
      "dependencies": [
        "1.1"
      ]
    }
  ],
  "phase3": [
    {
      "id": "3.1",
      "title": "Validate Setup and Build Instructions",
      "objective": "Verify documented setup instructions are accurate and complete",
      "tasks": [
        "Trace documented setup steps to actual configuration files",
        "Identify missing prerequisites not documented",
        "Flag outdated version requirements",
        "Note environment variables used but not documented",
        "Identify undocumented build steps or scripts",
        "Assess overall setup documentation quality"
      ],
      "deliverable": "Setup documentation accuracy report with specific corrections needed",
      "context": {
        "documented_setup": {
          "prerequisites": [],
          "build_steps": [],
          "env_vars": []
        },
        "validation_results": [],
        "undocumented_features": [
          "Framework: Django"
        ]
      },
      "dependencies": [
        "0.3",
        "1.2"
      ]
    },
    {
      "id": "3.2",
      "title": "Testing Strategy and Coverage Review",
      "objective": "Assess testing practices, coverage, and quality",
      "tasks": [
        "Identify test types present (unit, integration, e2e)",
        "Evaluate test organization and naming conventions",
        "Assess test coverage (estimate based on test file count)",
        "Identify testing framework and tools used",
        "Evaluate test quality and maintainability",
        "Identify gaps in test coverage"
      ],
      "deliverable": "Testing assessment with recommendations for improvement",
      "context": {
        "repository_path": "/home/user/scripts/codebase-reviewer"
      },
      "dependencies": [
        "1.1"
      ]
    }
  ],
  "phase4": [
    {
      "id": "4.1",
      "title": "Interactive Issue Prioritization",
      "objective": "Work with user to prioritize identified issues for remediation",
      "tasks": [
        "Present all issues organized by severity and category",
        "Ask user about their priorities (security, documentation, quality, etc.)",
        "Discuss effort estimates for top issues",
        "Help identify quick wins vs. major refactoring needs",
        "Create prioritized action plan based on user input",
        "Suggest grouping related issues into themes"
      ],
      "deliverable": "Prioritized, actionable remediation plan ready for execution",
      "context": {
        "total_issues": 2,
        "issues_by_severity": {
          "critical": 0,
          "high": 0,
          "medium": 2,
          "low": 0
        },
        "top_issues": [
          {
            "category": "Documentation Drift",
            "severity": "medium",
            "description": "Detected frameworks: ['Flask', 'Django']",
            "recommendation": "Architecture pattern appears consistent"
          },
          {
            "category": "Documentation Drift",
            "severity": "medium",
            "description": "Found 0/5 claimed components",
            "recommendation": "Review documented component list for accuracy"
          }
        ]
      },
      "dependencies": [
        "1.1",
        "2.1",
        "3.1"
      ]
    }
  ]
}